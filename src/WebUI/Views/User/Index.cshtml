
<p>
    <a type="button" style="width: 80px;" class="btn btn-success" data-bs-toggle="modal" data-bs-target=".bs-example-modal-xl" onclick="drawPatrialView('/User/GetUpsert/'+'0', 'xlModalBody')">Add</a>
</p>


<table id="demoGrid" class="table table-striped table-bordered dt-responsive nowrap" width="100%" cellspacing="0">
    <thead>
        <tr>
            <th>
                Id
            </th>
            <th>
                CreatedBy
            </th>
            <th>
                Created
            </th>
            <th>
                LastModifiedBy
            </th>
            <th>
                LastModified
            </th>
            <th>
                UserName
            </th>
            <th>
                FullName
            </th>
            <th>
                Email
            </th>
            <th>
                IsEnabled
            </th>
        </tr>
    </thead>
</table>

@*
<a type="button" data-bs-toggle="modal" data-bs-target=".bs-example-modal-lg" onclick="drawPatrialView('/User/Details/'+'@item.Id', 'lgModalBody')">Detail</a>
<a type="button" class="px-3 text-danger" data-bs-toggle="modal" data-bs-target=".bs-example-modal-xl" onclick="drawPatrialView('/User/Details/'+@item.Id, 'xlModalBody')">Delete</a> *@
<div id="actions" style="display:none;">
    @* <a style="width: 80px;" class="btn btn-primary" id="editLink">Edit</a> | *@
    @* <a id="editLink" onclick="openModal({url: '/User/GetUpsert', data: 'userId'})" data-toggle="ajax-modal" data-trigger="Modal">Edit</a> *@
    <a type="button" style="width: 80px;" class="btn btn-primary" id="editLink" data-bs-toggle="modal" data-bs-target=".bs-example-modal-xl" onclick="drawPatrialView('/User/GetUpsert/', 'xlModalBody')">Edit</a>
    <a type="button" style="width: 80px;" id="detailsLink" class="btn btn-secondary" data-bs-toggle="modal" data-bs-target=".bs-example-modal-xl" onclick="drawPatrialView('/User/Details/', 'xlModalBody')">Detail</a>
    <a type="button" style="width: 80px;" id="deleteLink" class="btn btn-danger" data-bs-toggle="modal" data-bs-target=".bs-example-modal-lg" onclick="drawPatrialView('/User/Delete/', 'lgModalBody')">Delete</a>
@*     <a style="width: 80px;" class="btn btn-danger" id="deleteLink">Delete</a> *@
</div>

@section scripts {
    <script>
        function updateButtonLinks(id) {
            // Fix: Properly concatenate the id into the URL for the 'drawPatrialView' function calls
            $('#editLink').attr('onclick', `drawPatrialView('/User/GetUpsert/'+${id}, 'xlModalBody')`);
            // Removed the commented-out code for clarity and cleanliness
            $('#detailsLink').attr('onclick', `drawPatrialView('/User/Details/'+${id}, 'xlModalBody')`);
            // Fix: Correctly close the deleteUser function call with the right parenthesis
            $('#deleteLink').attr('onclick', `deleteUser(${id})`);
            // Removed the commented-out code as it seems you've moved away from using href for deletion
        }




        $(document).ready(function () {
            var table = $('#demoGrid').DataTable({
                "processing": true,
                "serverSide": true,
                //"filter": true,
                //"orderMulti": false,
                ajax: {
                    "url": "/User/LoadData",
                    type: "POST",
                    data: "json"
                },
                columns: [
                    { data: "id", title: "Id", name: "id", visible: false },
                    { data: 'createdBy', title: "createdBy", name: "createdBy" },
                    { data: 'created', title: "created", name: "created" },
                    { data: 'lastModifiedBy', title: "lastModifiedBy", name: "lastModifiedBy" },
                    { data: 'lastModified', title: "lastModified", name: "lastModified" },
                    { data: 'userName', title: "userName", name: "userName" },
                    { data: 'fullName', title: "fullName", name: "fullName" },
                    { data: 'email', title: "email", name: "email" },
                    { data: 'isEnabled', title: "isEnabled", name: "isEnabled" }
                ]
            });

            $('#demoGrid tbody').on('click', 'tr', function () {
                var rowData = table.row(this).data();
                if ($(this).hasClass('selected')) {
                    $(this).removeClass('selected');
                    $('#actions').hide();
                } else {
                    table.$('tr.selected').removeClass('selected');
                    $(this).addClass('selected');
                    $('#actions').show();
                    updateButtonLinks(rowData.id);
                }
            });
        });
    </script>
}
